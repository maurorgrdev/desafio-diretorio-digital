{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { useFornecedorStore } from '@/store/fornecedores';\nimport FornecedorForm from '@/components/Fornecedor/FornecedorForm.vue';\nimport { onMounted, computed, toRefs } from 'vue';\nimport api from '@/axios';\nimport { useRouter } from 'vue-router';\nconst title = 'Edição de Fornecedor';\nconst subtitle = 'Editando um fornecedor';\nexport default {\n  __name: 'FornecedorUpdateView',\n  props: {\n    id: String\n  },\n  emits: ['change', 'delete'],\n  setup(__props, {\n    expose: __expose,\n    emit\n  }) {\n    __expose();\n    const props = __props;\n    const router = useRouter();\n    const store = useFornecedorStore();\n    const {\n      id\n    } = toRefs(props);\n    onMounted(async () => {\n      await store.loadFornecedor(id.value);\n    });\n    const novoFornecedor = computed(() => {\n      return store.getFornecedor;\n    });\n    async function callBackConfirmForm(fornecedorAtualizado, arquivoFornecedor) {\n      await store.editFornecedor(fornecedorAtualizado);\n      await uploadArquivoFornecedor(arquivoFornecedor, fornecedorAtualizado);\n      router.push({\n        path: '/fornecedores'\n      });\n    }\n    async function uploadArquivoFornecedor(arquivoFornecedor, fornecedorCreate) {\n      let form = new FormData();\n      console.log(arquivoFornecedor);\n      form.append('file', arquivoFornecedor);\n      form.append('name', arquivoFornecedor.name);\n      form.append('fornecedor_email', fornecedorCreate.email);\n      const haha = await api.post(\"/upload-fornecedor\", form, {\n        baseURL: 'http://localhost:8000/api/',\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n    }\n    async function callBackDownload(fornecedor_id, file_name) {\n      await api.get(`/download-fornecedor/${fornecedor_id}`, {\n        baseURL: 'http://localhost:8000/api/',\n        responseType: 'blob'\n      }).then(response => {\n        const fileUrl = window.URL.createObjectURL(new Blob([response.data]));\n        let fileLink = document.createElement('a');\n        fileLink.href = fileUrl;\n        fileLink.setAttribute('download', file_name);\n        document.body.appendChild(fileLink);\n        fileLink.click();\n      });\n    }\n    async function callBackDeleteFile(fornecedor_id) {\n      await api.delete(`/delete-fornecedor/${fornecedor_id}`, {\n        baseURL: 'http://localhost:8000/api/',\n        responseType: 'json'\n      });\n      await store.loadFornecedor(id.value);\n    }\n    const __returned__ = {\n      router,\n      props,\n      store,\n      title,\n      subtitle,\n      id,\n      novoFornecedor,\n      emit,\n      callBackConfirmForm,\n      uploadArquivoFornecedor,\n      callBackDownload,\n      callBackDeleteFile,\n      get useFornecedorStore() {\n        return useFornecedorStore;\n      },\n      FornecedorForm,\n      onMounted,\n      computed,\n      toRefs,\n      get api() {\n        return api;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["useFornecedorStore","FornecedorForm","onMounted","computed","toRefs","api","useRouter","title","subtitle","router","store","id","props","loadFornecedor","value","novoFornecedor","getFornecedor","callBackConfirmForm","fornecedorAtualizado","arquivoFornecedor","editFornecedor","uploadArquivoFornecedor","push","path","fornecedorCreate","form","FormData","console","log","append","name","email","haha","post","baseURL","headers","callBackDownload","fornecedor_id","file_name","get","responseType","then","response","fileUrl","window","URL","createObjectURL","Blob","data","fileLink","document","createElement","href","setAttribute","body","appendChild","click","callBackDeleteFile","delete"],"sources":["/Users/mauroroger/Desktop/diretorio-digital/front-end-diretorio-digital/front-end/src/views/Fornecedor/FornecedorUpdateView.vue"],"sourcesContent":["<template>\n    <v-container style=\"max-width: 70%;\">\n        <FornecedorForm \n            :title=\"title\" \n            :subtitle=\"subtitle\"\n            :dados-fornecedor=\"novoFornecedor\"\n            tipo=\"edicao\"\n            v-on:on-click-confirm=\"callBackConfirmForm\"\n            v-on:on-click-download-file=\"callBackDownload\"\n            v-on:on-click-delete-file=\"callBackDeleteFile\"\n        ></FornecedorForm>\n    </v-container>\n</template>\n\n<script setup>\n    import { useFornecedorStore } from '@/store/fornecedores';\n    import FornecedorForm from '@/components/Fornecedor/FornecedorForm.vue';\n    import { onMounted, computed, toRefs } from 'vue';\n    import api from '@/axios';\n    import { useRouter } from 'vue-router';\n\n    const router = useRouter()\n\n\n    const props = defineProps({\n        id: String ,\n    })\n\n    const store = useFornecedorStore()\n\n    const title = 'Edição de Fornecedor'\n    const subtitle = 'Editando um fornecedor'\n\n    const { id } = toRefs(props);\n\n    onMounted(async () => {\n        await store.loadFornecedor(id.value);\n    })\n\n    const novoFornecedor = computed(() => {\n        return store.getFornecedor\n    })\n\n    const emit = defineEmits(['change', 'delete'])    \n\n    async function callBackConfirmForm(fornecedorAtualizado, arquivoFornecedor){\n        await store.editFornecedor(fornecedorAtualizado);\n\n        await uploadArquivoFornecedor(arquivoFornecedor, fornecedorAtualizado);\n\n        router.push({ path: '/fornecedores' });\n    }\n\n    async function uploadArquivoFornecedor(arquivoFornecedor, fornecedorCreate){\n        let form = new FormData()\n        console.log(arquivoFornecedor);\n        form.append('file', arquivoFornecedor)\n        form.append('name', arquivoFornecedor.name)\n        form.append('fornecedor_email', fornecedorCreate.email)\n\n        const haha = await api.post(\"/upload-fornecedor\", form, {\n            baseURL: 'http://localhost:8000/api/',\n            headers: {\n            \"Content-Type\": \"multipart/form-data\"\n            }\n        });\n    }\n\n    async function callBackDownload(fornecedor_id, file_name){\n        await api.get(`/download-fornecedor/${fornecedor_id}`, {\n            baseURL: 'http://localhost:8000/api/',\n            responseType: 'blob',\n        }).then((response) => {\n            const fileUrl = window.URL.createObjectURL(new Blob([response.data]))\n            \n            let fileLink = document.createElement('a')\n            fileLink.href = fileUrl\n            fileLink.setAttribute('download', file_name)\n            document.body.appendChild(fileLink)\n            fileLink.click();\n        });\n    }\n\n    async function callBackDeleteFile(fornecedor_id){\n        await api.delete(`/delete-fornecedor/${fornecedor_id}`, {\n            baseURL: 'http://localhost:8000/api/',\n            responseType: 'json',\n        });\n\n        await store.loadFornecedor(id.value);\n    }\n</script>"],"mappings":";;;;AAeI,SAASA,kBAAkB,QAAQ,sBAAsB;AACzD,OAAOC,cAAc,MAAM,4CAA4C;AACvE,SAASC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,KAAK;AACjD,OAAOC,GAAG,MAAM,SAAS;AACzB,SAASC,SAAS,QAAQ,YAAY;AAWtC,MAAMC,KAAK,GAAG,sBAAsB;AACpC,MAAMC,QAAQ,GAAG,wBAAwB;;;;;;;;;;;;;IAVzC,MAAMC,MAAM,GAAGH,SAAS,CAAC,CAAC;IAO1B,MAAMI,KAAK,GAAGV,kBAAkB,CAAC,CAAC;IAKlC,MAAM;MAAEW;IAAG,CAAC,GAAGP,MAAM,CAACQ,KAAK,CAAC;IAE5BV,SAAS,CAAC,YAAY;MAClB,MAAMQ,KAAK,CAACG,cAAc,CAACF,EAAE,CAACG,KAAK,CAAC;IACxC,CAAC,CAAC;IAEF,MAAMC,cAAc,GAAGZ,QAAQ,CAAC,MAAM;MAClC,OAAOO,KAAK,CAACM,aAAa;IAC9B,CAAC,CAAC;IAIF,eAAeC,mBAAmBA,CAACC,oBAAoB,EAAEC,iBAAiB,EAAC;MACvE,MAAMT,KAAK,CAACU,cAAc,CAACF,oBAAoB,CAAC;MAEhD,MAAMG,uBAAuB,CAACF,iBAAiB,EAAED,oBAAoB,CAAC;MAEtET,MAAM,CAACa,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAgB,CAAC,CAAC;IAC1C;IAEA,eAAeF,uBAAuBA,CAACF,iBAAiB,EAAEK,gBAAgB,EAAC;MACvE,IAAIC,IAAI,GAAG,IAAIC,QAAQ,CAAC,CAAC;MACzBC,OAAO,CAACC,GAAG,CAACT,iBAAiB,CAAC;MAC9BM,IAAI,CAACI,MAAM,CAAC,MAAM,EAAEV,iBAAiB,CAAC;MACtCM,IAAI,CAACI,MAAM,CAAC,MAAM,EAAEV,iBAAiB,CAACW,IAAI,CAAC;MAC3CL,IAAI,CAACI,MAAM,CAAC,kBAAkB,EAAEL,gBAAgB,CAACO,KAAK,CAAC;MAEvD,MAAMC,IAAI,GAAG,MAAM3B,GAAG,CAAC4B,IAAI,CAAC,oBAAoB,EAAER,IAAI,EAAE;QACpDS,OAAO,EAAE,4BAA4B;QACrCC,OAAO,EAAE;UACT,cAAc,EAAE;QAChB;MACJ,CAAC,CAAC;IACN;IAEA,eAAeC,gBAAgBA,CAACC,aAAa,EAAEC,SAAS,EAAC;MACrD,MAAMjC,GAAG,CAACkC,GAAG,CAAE,wBAAuBF,aAAc,EAAC,EAAE;QACnDH,OAAO,EAAE,4BAA4B;QACrCM,YAAY,EAAE;MAClB,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAK;QAClB,MAAMC,OAAO,GAAGC,MAAM,CAACC,GAAG,CAACC,eAAe,CAAC,IAAIC,IAAI,CAAC,CAACL,QAAQ,CAACM,IAAI,CAAC,CAAC,CAAC;QAErE,IAAIC,QAAQ,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;QAC1CF,QAAQ,CAACG,IAAI,GAAGT,OAAO;QACvBM,QAAQ,CAACI,YAAY,CAAC,UAAU,EAAEf,SAAS,CAAC;QAC5CY,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,QAAQ,CAAC;QACnCA,QAAQ,CAACO,KAAK,CAAC,CAAC;MACpB,CAAC,CAAC;IACN;IAEA,eAAeC,kBAAkBA,CAACpB,aAAa,EAAC;MAC5C,MAAMhC,GAAG,CAACqD,MAAM,CAAE,sBAAqBrB,aAAc,EAAC,EAAE;QACpDH,OAAO,EAAE,4BAA4B;QACrCM,YAAY,EAAE;MAClB,CAAC,CAAC;MAEF,MAAM9B,KAAK,CAACG,cAAc,CAACF,EAAE,CAACG,KAAK,CAAC;IACxC"},"metadata":{},"sourceType":"module","externalDependencies":[]}