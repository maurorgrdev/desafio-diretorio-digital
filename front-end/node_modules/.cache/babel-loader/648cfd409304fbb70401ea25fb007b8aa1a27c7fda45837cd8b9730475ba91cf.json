{"ast":null,"code":"import { useUsuarioStore } from '../../store/user.js';\nexport default {\n  data: vm => ({\n    loading: false,\n    timeout: null,\n    login: '',\n    password: ''\n  }),\n  setup() {\n    const usuarioStore = useUsuarioStore();\n    return {\n      usuarioStore\n    };\n  },\n  methods: {\n    async submit(event) {\n      this.loading = true;\n      const results = {\n        email: this.login,\n        password: this.password\n      };\n      this.loading = false;\n      const response = await this.usuarioStore.login(results);\n      if (response) {\n        this.$router.replace({\n          path: '/fornecedores'\n        });\n      } else {}\n    },\n    async checkApi(userName) {\n      return new Promise(resolve => {\n        clearTimeout(this.timeout);\n        this.timeout = setTimeout(() => {\n          if (!userName) return resolve('Please enter a user name.');\n          if (userName === 'johnleider') return resolve('User name already taken. Please try another one.');\n          return resolve(true);\n        }, 1000);\n      });\n    },\n    CnpjValido(cnpj) {\n      cnpj = cnpj.replace(/[^\\d]+/g, '');\n      if (cnpj.length != 14) return false;\n      var tamanhoTotal = cnpj.length - 2;\n      var cnpjSemDigitos = cnpj.substring(0, tamanhoTotal);\n      var digitosVerificadores = cnpj.substring(tamanhoTotal);\n      var soma = 0;\n      var pos = tamanhoTotal - 7;\n      for (i = tamanhoTotal; i >= 1; i--) {\n        soma += cnpjSemDigitos.charAt(tamanhoTotal - i) * pos--;\n        if (pos < 2) pos = 9;\n      }\n      resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n      if (resultado != digitosVerificadores.charAt(0)) return false;\n      tamanhoTotal = tamanhoTotal + 1;\n      cnpjSemDigitos = cnpj.substring(0, tamanhoTotal);\n      soma = 0;\n      pos = tamanhoTotal - 7;\n      for (i = tamanhoTotal; i >= 1; i--) {\n        soma += cnpjSemDigitos.charAt(tamanhoTotal - i) * pos--;\n        if (pos < 2) pos = 9;\n      }\n      resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n      if (resultado != digitosVerificadores.charAt(1)) return false;\n      return true;\n    }\n  }\n};","map":{"version":3,"names":["useUsuarioStore","data","vm","loading","timeout","login","password","setup","usuarioStore","methods","submit","event","results","email","response","$router","replace","path","checkApi","userName","Promise","resolve","clearTimeout","setTimeout","CnpjValido","cnpj","length","tamanhoTotal","cnpjSemDigitos","substring","digitosVerificadores","soma","pos","i","charAt","resultado"],"sources":["/Users/mauroroger/Desktop/diretorio-digital/front-end-diretorio-digital/front-end/src/views/Usuario/Login.vue"],"sourcesContent":["<template>\n    <v-container>\n        <v-card \n            class=\"mx-auto\"\n            max-width=\"500\">\n            <v-card-item>\n                <v-form validate-on=\"submit lazy\" @submit.prevent=\"submit\">\n                    <v-row>\n                        <v-text-field\n                        v-model=\"login\"\n                        label=\"CPF ou Email\"\n                        ></v-text-field>\n                    </v-row>\n                    <v-row>\n                        <v-text-field\n                        v-model=\"password\"\n                        label=\"Password\"\n                        ></v-text-field>\n                    </v-row>\n                    <v-btn\n                    :loading=\"loading\"\n                    type=\"submit\"\n                    block\n                    class=\"mt-2\"\n                    text=\"Login\"\n                    ></v-btn>\n                </v-form>\n            </v-card-item>\n        </v-card>\n    </v-container>\n</template>\n\n<script>\n    import { useUsuarioStore } from '../../store/user.js'\n  export default {\n    data: vm => ({\n      loading: false,\n      timeout: null,\n      login: '',\n      password: '',\n    }),\n\n    setup() {\n        const usuarioStore = useUsuarioStore()\n\n        return { usuarioStore }\n    },\n\n    methods: {\n      async submit (event) {\n        this.loading = true\n\n        const results = {\n                email: this.login,\n                password: this.password\n        }\n\n        this.loading = false\n\n        const response = await this.usuarioStore.login(results);\n\n        if(response){\n            this.$router.replace({ path: '/fornecedores' })\n        } else {\n\n        }\n        \n      },\n      async checkApi (userName) {\n        return new Promise(resolve => {\n          clearTimeout(this.timeout)\n\n          this.timeout = setTimeout(() => {\n            if (!userName) return resolve('Please enter a user name.')\n            if (userName === 'johnleider') return resolve('User name already taken. Please try another one.')\n\n            return resolve(true)\n          }, 1000)\n        })\n      },\n\n        CnpjValido(cnpj) {\n            cnpj = cnpj.replace(/[^\\d]+/g, '');\n\n            if (cnpj.length != 14)\n                return false;\n\n            var tamanhoTotal = cnpj.length - 2\n            var cnpjSemDigitos = cnpj.substring(0, tamanhoTotal);\n            var digitosVerificadores = cnpj.substring(tamanhoTotal);\n            var soma = 0;\n            var pos = tamanhoTotal - 7;\n            for (i = tamanhoTotal; i >= 1; i--) {\n                soma += cnpjSemDigitos.charAt(tamanhoTotal - i) * pos--;\n                if (pos < 2)\n                    pos = 9;\n            }\n            resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n            if (resultado != digitosVerificadores.charAt(0))\n                return false;\n\n            tamanhoTotal = tamanhoTotal + 1;\n            cnpjSemDigitos = cnpj.substring(0, tamanhoTotal);\n            soma = 0;\n            pos = tamanhoTotal - 7;\n            for (i = tamanhoTotal; i >= 1; i--) {\n                soma += cnpjSemDigitos.charAt(tamanhoTotal - i) * pos--;\n                if (pos < 2)\n                    pos = 9;\n            }\n\n            resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n            if (resultado != digitosVerificadores.charAt(1))\n                return false;\n\n            return true;\n        }\n    },\n  }\n</script>\n\n<!-- <script setup>\n\nimport { reactive } from 'vue'\nimport { useUsuarioStore } from \"../../store/user\"\n\nconst store = useUsuarioStore()\n\nlet login = ''\nlet password = ''\n\nconst nameRules = [\n    value => {\n        if (value) return true\n\n        return 'Name is required.'\n    },\n    value => {\n        if (value?.length <= 10) return true\n\n        return 'Name must be less than 10 characters.'\n    },\n]\nlet email = ''\nconst emailRules = [\n    value => {\n        if (value) return true\n\n        return 'E-mail is requred.'\n    },\n    value => {\n        if (/.+@.+\\..+/.test(value)) return true\n\n        return 'E-mail must be valid.'\n    },\n]\n\n\nfunction userLogin() {\n    const dados = reactive({\n        login: login,\n        password: password,\n    })  \n    \n    store.login(dados);\n}\n</script> -->"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}